!function(){function e(e){var t=e,a=t.parentNode.parentNode.nextElementSibling.getElementsByTagName("textarea")[0],n=t.getAttribute("data-fromName");a.value="回复 "+n+"："}var t=document.getElementById("commentsLength").dataset.page,a=document.getElementById("commentsLength").dataset.num,n=document.getElementById("commentsLength").dataset.length;if(t)for(var o=(t-1)*a;o<n;o++)$("#reply_"+o).bind("click",function(){var t=this;if("block"==t.parentNode.parentNode.nextElementSibling.style.display)t.parentNode.parentNode.nextElementSibling.style.display="none",t.parentNode.parentNode.nextElementSibling.firstElementChild.innerHTML="";else{t.parentNode.parentNode.nextElementSibling.style.display="block",e(t);var a={email:t.getAttribute("data-name"),day:t.getAttribute("data-day"),quesTitle:t.getAttribute("data-questitle"),commentId:t.getAttribute("data-commentid")};$.ajax({data:a,url:"/getReplyOfComment",type:"post",jsonpCallback:"callback",success:function(e){console.log("这是data"),console.log(e);for(var a=document.createDocumentFragment(),n=t.parentNode.parentNode.nextElementSibling.firstElementChild,o=0,l=e.length;o<l;o++)li=document.createElement("li"),li.innerHTML="<div class='commentReplyFromNamePic'><a href='#'><img src='images/9.png'></a></div><div  class='commentReplyFromName'><a href='#'>"+e[o].commentReplyFromName+"</a> 回复 <a href='#'>"+e[o].commentReplyToName+"</a><span class='commTime'>"+e[o].time.minute+"</span></div><div class='commentReplyContent'>"+e[o].commentReplyContent+"</div><a onclick=replyAction(this) class='replyAction action' data-fromName='"+e[o].commentReplyFromName+"'>回复</a>",a.appendChild(li);n.appendChild(a),console.log("这是data")},err:function(e,t,a){alert("error "+t+" "+a)}})}}),$("#comment_reply_btn_"+o).bind("click",function(){var e=this,t=e.previousElementSibling.value,a=t.indexOf(" "),n=t.indexOf("："),o=t.substring(a,n);commentReplyContent=t.substring(n+1);var l={email:e.getAttribute("data-name"),day:e.getAttribute("data-day"),quesTitle:e.getAttribute("data-questitle"),commentReplyFromName:e.getAttribute("data-commentreplyfromname"),commentReplyToName:o,commentReplyContent:commentReplyContent,commentId:e.getAttribute("data-commentid")};console.log(commentReplyContent),console.log(e.getAttribute("data-name")),console.log(e.getAttribute("data-day")),console.log(e.getAttribute("data-questitle")),console.log(e.getAttribute("data-commentreplyfromName")),console.log(e.getAttribute("data-commentreplytoName")),$.ajax({data:l,url:"/commentReply",type:"post",jsonpCallback:"callback",success:function(t){console.log("这是data"),console.log(t);var a=document.createDocumentFragment(),n=e.parentNode.parentNode.parentNode.previousElementSibling,o=document.createElement("li");o.innerHTML="<div class='commentReplyFromNamePic'><a href='#'><img src='images/9.png'></a></div><div class='commentReplyFromName'><a href='#'>"+t.commentReplyFromName+"</a> 回复 <a href='#'>"+t.commentReplyToName+"</a><span class='commTime'>"+t.time.minute+"</span></div><div class='commentReplyContent'>"+t.commentReplyContent+"</div><a onclick=replyAction() class='replyAction action' data-fromName='"+t.commentReplyFromName+"'>回复</a>",a.appendChild(o),n.appendChild(a),e.previousElementSibling.value="",console.log("这是data")},err:function(e,t,a){alert("error "+t+" "+a)}})}),$("#commentAgree_"+o).bind("click",function(){var e=this,t={email:e.getAttribute("data-name"),day:e.getAttribute("data-day"),quesTitle:e.getAttribute("data-questitle"),commentId:e.getAttribute("data-commentid")};console.log(111),$.ajax({data:t,url:"/commentAgree",type:"post",jsonpCallback:"callback",success:function(t){console.log("这是data"),console.log(t),console.log("这是data"),e.innerHTML="赞同 "+t},error:function(e,t,a){alert("error "+t+" "+a)}}),console.log(222)}),$("#commentDisagree_"+o).bind("click",function(){var e=this,t={email:e.getAttribute("data-name"),day:e.getAttribute("data-day"),quesTitle:e.getAttribute("data-questitle"),commentId:e.getAttribute("data-commentid")};console.log(111),$.ajax({data:t,url:"/commentDisagree",type:"post",jsonpCallback:"callback",success:function(t){console.log("这是data"),console.log(t),console.log("这是data"),e.innerHTML="反对 "+t},error:function(e,t,a){alert("error "+t+" "+a)}}),console.log(222)})}();