!function(){function e(e){var t=document.getElementById("agree-num"),n=document.getElementById("post-title").innerHTML,e=EventUtil.getEvent(e),o=(EventUtil.getTarget(e),"/agree/"+a+"/"+n),l=JSON.stringify({author:a,title:n});ajax("post",o,"application/json",l,function(e){console.log(JSON.parse(e).agree),t.innerHTML=parseInt(JSON.parse(e).agree),JSON.parse(e).isAgree?s[0].style.color="#EF5959":s[0].style.color="#ccc"})}function t(e){console.log("collection");var t=document.getElementById("post-title").innerHTML,n=document.getElementById("post-author").innerHTML,e=EventUtil.getEvent(e),o=(EventUtil.getTarget(e),"/collect/"+n+"/"+t),l=JSON.stringify({author:n,title:t});ajax("post",o,"application/json",l,function(e){JSON.parse(e).isColl?u[0].style.color="#EF5959":u[0].style.color="#ccc"})}function n(e){console.log("collection");var t=(document.getElementById("post-title").innerHTML,document.getElementById("post-author").innerHTML),n="/attention/"+t,o=JSON.stringify({author:t});ajax("post",n,"application/json",o,function(e){console.log(typeof e),"add"==JSON.parse(e).isAttention?(console.log("qquxia"),i.innerHTML="取消关注"):(console.log("ia"),i.innerHTML="关注")})}var o=document.getElementById("agree"),l=document.getElementById("collect"),i=document.getElementById("attention"),c=document.getElementById("post-author");if(c)var a=c.innerHTML;if(o){var r=o.getAttribute("data"),s=o.getElementsByTagName("i");"true"==r&&(s[0].style.color="#EF5959")}if(l){var d=l.getAttribute("data"),u=l.getElementsByTagName("i");"true"==d&&(u[0].style.color="#EF5959")}var g=document.getElementById("post-delete");if(i){var m=i.getAttribute("data");m&&"true"==m&&(i.innerHTML="取消关注")}EventUtil.addHandler(o,"click",e),EventUtil.addHandler(l,"click",t),i&&EventUtil.addHandler(i,"click",n),console.log(g),EventUtil.addHandler(g,"click",function(){var e=document.getElementById("post-title").innerHTML,t=document.getElementById("post-author").innerHTML,n=(JSON.stringify({author:t,title:e}),document.querySelector(".p2"));console.log(e);var o=Popuper({wrap:n,type:"success",confirm:function(){ajax("get","/deletePost/"+encodeURIComponent(t)+"/"+encodeURIComponent(e),null,null,function(e){"success"==e&&(window.location.href="/user")})},cancel:function(){}}).edit({title:"提示",content:"是否删除该文章"}).show();o.toggle().edit({type:"info"})})}();